import{r as v,j as b,C as G,e as K,c as u,a as o,K as f,G as i,L as m,F as B,D as M,E as g,q as h,o as p,M as $,J as A,t as F}from"./index-YV02AcbJ.js";const L={class:"todoapp"},R={class:"header"},I=o("h1",null,"todos",-1),P={class:"main"},q=["checked"],z=o("label",{for:"toggle-all"},"Mark all as complete",-1),H={class:"todo-list"},W={class:"view"},Y=["onUpdate:modelValue"],Q=["onDblclick"],X=["onClick"],Z=["onUpdate:modelValue","onBlur","onKeyup"],ee={class:"footer"},te={class:"todo-count"},oe={class:"filters"},D="vue-todomvc",se={__name:"TodoView",setup(le){const d={all:e=>e,active:e=>e.filter(l=>!l.completed),completed:e=>e.filter(l=>l.completed)},s=v(JSON.parse(localStorage.getItem(D)||"[]")),n=v("all"),c=v(),E=b(()=>d[n.value](s.value)),r=b(()=>d.active(s.value).length);window.addEventListener("hashchange",C),C(),G(()=>{localStorage.setItem(D,JSON.stringify(s.value))});let _=JSON.parse(JSON.stringify(s.value));K(s,e=>{e.forEach((l,t)=>{const a=_[t];if(l.completed!==a.completed){const j={id:l.id,completed:l.completed};N("https://localhost:7135/api/TodoGetVueControllers/UpDataTodo",j)}}),_=JSON.parse(JSON.stringify(e))},{deep:!0});function S(e){s.value.forEach(l=>l.completed=e.target.checked)}function V(e){const l=e.target.value.trim(),t=l;l&&(s.value.push({id:Date.now(),title:l,completed:!1}),T("https://localhost:7135/api/TodoGetVueControllers/addtodo",t),e.target.value="")}function T(e,l){fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then(a=>a.json()).then(a=>{console.log("Response from backend:",a)}).catch(a=>{console.error("Error:",a)})}function N(e,l){fetch(e,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)}).then(t=>{if(!t.ok)throw new Error("Failed to update todo");return t.json()}).then(t=>{console.log("Response from backend:",t)}).catch(t=>{console.error("Error:",t)})}function k(e){s.value.splice(s.value.indexOf(e),1);const l="https://localhost:7135/api/TodoGetVueControllers/DeleteTodo",t=e.id;T(l,t)}let y="";function O(e){y=e.title,c.value=e}function J(e){c.value=null,e.title=y}function w(e){c.value&&(c.value=null,e.title=e.title.trim(),e.title||k(e))}function x(){s.value=d.active(s.value)}function C(){const e=window.location.hash.replace(/#\/?/,"");d[e]?n.value=e:(window.location.hash="",n.value="all")}async function U(){try{const e=await fetch("https://localhost:7135/api/TodoGetVueControllers/gettodos");if(!e.ok)throw new Error("Network response was not ok");const l=await e.json();s.value=l}catch(e){console.error("Error fetching todos:",e)}}return(e,l)=>(p(),u("div",null,[o("section",L,[o("header",R,[I,o("input",{class:"new-todo",autofocus:"",placeholder:"What needs to be done?",onKeyup:f(V,["enter"])},null,32)]),i(o("section",P,[o("input",{id:"toggle-all",class:"toggle-all",type:"checkbox",checked:r.value===0,onChange:S},null,40,q),z,o("ul",H,[(p(!0),u(B,null,M(E.value,t=>(p(),u("li",{class:h(["todo",{completed:t.completed,editing:t===c.value}]),key:t.id},[o("div",W,[i(o("input",{class:"toggle",type:"checkbox","onUpdate:modelValue":a=>t.completed=a},null,8,Y),[[$,t.completed]]),o("label",{onDblclick:a=>O(t)},g(t.title),41,Q),o("button",{class:"destroy",onClick:a=>k(t)},null,8,X)]),t===c.value?i((p(),u("input",{key:0,class:"edit",type:"text","onUpdate:modelValue":a=>t.title=a,onVnodeMounted:l[0]||(l[0]=({el:a})=>a.focus()),onBlur:a=>w(t),onKeyup:[f(a=>w(t),["enter"]),f(a=>J(t),["escape"])]},null,40,Z)),[[A,t.title]]):F("",!0)],2))),128))])],512),[[m,s.value.length]]),i(o("footer",ee,[o("span",te,[o("strong",null,g(r.value),1),o("span",null,g(r.value===1?" item":" items")+" left",1)]),o("ul",oe,[o("li",null,[o("a",{href:"#/all",class:h({selected:n.value==="all"})},"All",2)]),o("li",null,[o("a",{href:"#/active",class:h({selected:n.value==="active"})},"Active",2)]),o("li",null,[o("a",{href:"#/completed",class:h({selected:n.value==="completed"})},"Completed",2)])]),i(o("button",{class:"clear-completed",onClick:x}," Clear completed ",512),[[m,s.value.length>r.value]])],512),[[m,s.value.length]])]),o("button",{onClick:U},"Fetch Todos")]))}};export{se as default};
